import{a as e}from"./table.api.c0f04914.js";import{e as l,aj as t,az as a,f as n,aq as o,aH as u,a$ as d,aI as i,aJ as s,aC as r,b9 as c,b1 as p,aF as f,a6 as m,F as v,_ as g,ba as b,aK as y,ae as C,bb as h,ap as w,ar as k}from"./vendor.8ca9dadd.js";import"./index.04993d45.js";var x=l({name:"ViewTableQuery",setup(){const l=t({selectCount:0,invokeCount:0,expand:!1,pageNo:0,pageSize:10,loading:!1,selectedRowKeys:new Array}),x=t({dataSourceList:[],total:0}),I=[{title:"规则编号",id:0,dataIndex:"code",width:200},{title:"描述",id:2,dataIndex:"desc",width:800},{title:"服务调用次数",id:3,dataIndex:"invokeCount",width:160,orderable:!0,sort:(e,l)=>e.invokeCount-l.invokeCount},{title:"状态",id:4,dataIndex:"status",width:160,custom:!0,customRender:()=>n(y.Column,{title:"操作",customRender:K},null)},{title:"更新时间",id:5,dataIndex:"updateTime",width:200,orderable:!0,sort:(e,l)=>new Date(e.updateTime).getTime()-new Date(l.updateTime).getTime()},{title:"操作",id:6,custom:!0,customRender:()=>n(y.Column,{title:"操作",customRender:j},null)}],O=[{label:"停止",value:0,color:"#d9d9d9"},{label:"运行中",value:1,color:"#108ee9"},{label:"已上线",value:2,color:"green"},{label:"异常",value:3,color:"red"}],S=()=>{l.loading=!0,e(l.pageNo,l.pageSize).then((({records:e,total:l})=>{x.dataSourceList=e,x.total=l})).finally((()=>{l.loading=!1}))};a((()=>{S()}));const R=()=>{l.pageNo=1,S()},z=(...[e,t])=>{l.pageNo=e,l.pageSize=t,S()},j=({record:e})=>n("span",null,[n("a",{onClick:()=>{k.info("配置"+e.id)}},[o("配置")]),n(h,{type:"vertical"},null),n("a",{onClick:()=>{k.info("订阅警报"+e.id)}},[o("订阅警报")])]),K=({record:e})=>{const l=O.find((l=>l.value===e.status));return n(w,{text:null==l?void 0:l.label,color:null==l?void 0:l.color},null)};return()=>{let e;return n("section",null,[n("section",{class:"query-title"},[n("div",{class:"title-wrap"},[n("h1",null,[o("查询表单")])])]),n("section",{class:"query-content"},[n(u,null,{default:()=>{return[n("section",null,[n(d,null,{default:()=>[n(i,{gutter:24},{default:()=>[n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"规则编号"},{default:()=>[n(r,{placeholder:"请输入"},null)]})]}),n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"使用状态"},{default:()=>[n(c,null,{default:()=>[n(c.Option,{value:0},{default:()=>[o("停止")]}),n(c.Option,{value:1},{default:()=>[o("运行中")]}),n(c.Option,{value:2},{default:()=>[o("已上线")]}),n(c.Option,{value:3},{default:()=>[o("异常")]})]})]})]}),l.expand?n("template",null,[n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"调用次数"},{default:()=>[n(r,{placeholder:"请输入"},null)]})]}),n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"更新日期"},{default:()=>[n(p,null,null)]})]}),n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"使用状态"},{default:()=>[n(c,null,{default:()=>[n(c.Option,{value:0},{default:()=>[o("停止")]}),n(c.Option,{value:1},{default:()=>[o("运行中")]}),n(c.Option,{value:2},{default:()=>[o("已上线")]}),n(c.Option,{value:3},{default:()=>[o("异常")]})]})]})]}),n(s,{md:8,sm:24},{default:()=>[n(d.Item,{label:"使用状态"},{default:()=>[n(c,null,{default:()=>[n(c.Option,{value:0},{default:()=>[o("停止")]}),n(c.Option,{value:1},{default:()=>[o("运行中")]}),n(c.Option,{value:2},{default:()=>[o("已上线")]}),n(c.Option,{value:3},{default:()=>[o("异常")]})]})]})]})]):"",n(s,{span:l.expand?24:8,class:"btn-groups"},{default:()=>[n(d.Item,null,{default:()=>[n(f,{type:"primary",onClick:R},{default:()=>[o("查询")]}),n(f,{type:"default",class:"btn-mg"},{default:()=>[o("重置")]}),l.expand?n(f,{type:"link"},{default:()=>[o("收起"),n(m,null,null)]}):n(f,{type:"link"},{default:()=>[o("展开"),n(v,null,null)]})]})]})]})]})]),n("section",null,[n(f,{type:"primary",icon:n(g,null,null)},{default:()=>[o("新建")]}),n("div",{class:"my-md"},[n(b,{message:n("span",null,[o("已选择"),n(f,{type:"link"},{default:()=>[n("b",null,[l.selectCount])]}),o("项     服务调用总计 "),n("b",null,[l.invokeCount]),o(" 万       "),l.selectCount>0?n(f,{type:"link"},{default:()=>[o("清空")]}):""]),type:"info",key:"id"},null)]),n(y,{loading:l.loading,key:"id",rowKey:"id",rowSelection:{type:"checkbox",selectedRowKeys:l.selectedRowKeys,selections:!1,onChange:(e,t)=>{l.selectedRowKeys=e,l.selectCount=l.selectedRowKeys.length;let a=0;t.forEach((e=>{a+=e.invokeCount})),l.invokeCount=a/1e4}},onChange:(...e)=>{console.log(e)},pagination:{current:l.pageNo,pageSize:l.pageSize,total:x.total,showSizeChanger:!0,showQuickJumper:!0,onChange:z,onShowSizeChange:z},dataSource:x.dataSourceList},(t=e=I.map((e=>e.orderable?n(y.Column,{title:e.title,dataIndex:e.dataIndex,sorter:e.sort},null):e.custom?e.customRender():n(y.Column,{title:e.title,dataIndex:e.dataIndex},null))),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!C(t)?e:{default:()=>[e]}))])];var t}})])])}}});export{x as default};
