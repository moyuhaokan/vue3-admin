import{e as ae,f as s,aj as he,aM as Q,aU as re,az as se,aV as Ke,aW as Nt,aX as K,ad as ce,m as Kt,ag as We,aY as we,aZ as de,a_ as xe}from"./vendor.9087327e.js";var Zt=Object.defineProperty,Mt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,Ge=(n,l,i)=>l in n?Zt(n,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[l]=i,$e=(n,l)=>{for(var i in l||(l={}))Wt.call(l,i)&&Ge(n,i,l[i]);if(pt)for(var i of pt(l))Gt.call(l,i)&&Ge(n,i,l[i]);return n},Je=(n,l)=>Mt(n,Vt(l)),Jt=(n,l,i)=>(Ge(n,typeof l!="symbol"?l+"":l,i),i);const Xt="https://at.alicdn.com/t/font_2605852_khjf435c7th.js",Ze={atom:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/atom-one-dark.css",github:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/github.css",githubDark:"https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/github-dark.css",js:"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/highlight.min.js"},ht={main:"https://cdn.jsdelivr.net/npm/prettier@2.4.0/standalone.js",markdown:"https://cdn.jsdelivr.net/npm/prettier@2.4.0/parser-markdown.js"},gt={css:"https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css",js:"https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"},Yt="https://cdn.jsdelivr.net/npm/screenfull@5.1.0/dist/screenfull.js",Qt=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","-","codeRow","code","link","image","table","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","htmlPreview","catalog","github"],Dt={"zh-CN":{toolbarTips:{bold:"\u52A0\u7C97",underline:"\u4E0B\u5212\u7EBF",italic:"\u659C\u4F53",strikeThrough:"\u5220\u9664\u7EBF",title:"\u6807\u9898",sub:"\u4E0B\u6807",sup:"\u4E0A\u6807",quote:"\u5F15\u7528",unorderedList:"\u65E0\u5E8F\u5217\u8868",orderedList:"\u6709\u5E8F\u5217\u8868",codeRow:"\u884C\u5185\u4EE3\u7801",code:"\u5757\u7EA7\u4EE3\u7801",link:"\u94FE\u63A5",image:"\u56FE\u7247",table:"\u8868\u683C",revoke:"\u540E\u9000",next:"\u524D\u8FDB",save:"\u4FDD\u5B58",prettier:"\u7F8E\u5316",pageFullscreen:"\u6D4F\u89C8\u5668\u5168\u5C4F",fullscreen:"\u5C4F\u5E55\u5168\u5C4F",preview:"\u9884\u89C8",htmlPreview:"html\u4EE3\u7801\u9884\u89C8",catalog:"\u76EE\u5F55",github:"\u6E90\u7801\u5730\u5740"},titleItem:{h1:"\u4E00\u7EA7\u6807\u9898",h2:"\u4E8C\u7EA7\u6807\u9898",h3:"\u4E09\u7EA7\u6807\u9898",h4:"\u56DB\u7EA7\u6807\u9898",h5:"\u4E94\u7EA7\u6807\u9898",h6:"\u516D\u7EA7\u6807\u9898"},imgTitleItem:{link:"\u6DFB\u52A0\u94FE\u63A5",upload:"\u4E0A\u4F20\u56FE\u7247",clip2upload:"\u88C1\u526A\u4E0A\u4F20"},linkModalTips:{title:"\u6DFB\u52A0",descLable:"\u94FE\u63A5\u63CF\u8FF0\uFF1A",descLablePlaceHolder:"\u8BF7\u8F93\u5165\u63CF\u8FF0...",urlLable:"\u94FE\u63A5\u5730\u5740\uFF1A",UrlLablePlaceHolder:"\u8BF7\u8F93\u5165\u94FE\u63A5...",buttonOK:"\u786E\u5B9A"},clipModalTips:{title:"\u88C1\u526A\u56FE\u7247\u4E0A\u4F20",buttonUpload:"\u4E0A\u4F20"},copyCode:{text:"\u590D\u5236\u4EE3\u7801",tips:"\u5DF2\u590D\u5236\uFF01"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Img Link",upload:"Upload Img",clip2upload:"Clip Upload"},linkModalTips:{title:"Add ",descLable:"Desc:",descLablePlaceHolder:"Enter a description...",urlLable:"Link:",UrlLablePlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",tips:"Copied!"}}};class en{constructor(){Jt(this,"pools",{})}remove(l,i,D){const C=this.pools[l]&&this.pools[l][i];C&&(this.pools[l][i]=C.filter(d=>d===D))}clear(l){this.pools[l]={}}on(l,i){return this.pools[l]||(this.pools[l]={}),this.pools[l][i.name]||(this.pools[l][i.name]=[]),this.pools[l][i.name].push(i.callback),this.pools[l][i.name].includes(i.callback)}emit(l,i,...D){this.pools[l]||(this.pools[l]={});const C=this.pools[l][i];C&&C.forEach(d=>{try{d(...D)}catch(p){console.error(`${i}\u76D1\u542C\u4E8B\u4EF6\u6267\u884C\u5F02\u5E38\uFF01`,p)}})}}var T=new en;const tn=(n,l)=>{const{editorId:i}=n,D=d=>{var p,f;return((p=n.toolbars)==null?void 0:p.includes(d))&&!((f=n.toolbarsExclude)==null?void 0:f.includes(d))},b=d=>{if(d.target===document.querySelector(`#${n.editorId}-textarea`))if(d.ctrlKey||d.metaKey)switch(d.code){case"KeyS":{d.shiftKey?D("strikeThrough")&&T.emit(i,"replace","strikeThrough"):D("save")&&(T.emit(i,"onSave",n.modelValue),d.preventDefault());break}case"KeyB":{D("bold")&&(T.emit(i,"replace","bold"),d.preventDefault());break}case"KeyU":{d.shiftKey?D("unorderedList")&&(T.emit(i,"replace","unorderedList"),d.preventDefault()):D("underline")&&(T.emit(i,"replace","underline"),d.preventDefault());break}case"KeyI":{d.shiftKey?D("image")&&(T.emit(i,"openModals","image"),d.preventDefault()):D("italic")&&(T.emit(i,"replace","italic"),d.preventDefault());break}case"Digit1":{D("title")&&(T.emit(i,"replace","h1"),d.preventDefault());break}case"Digit2":{D("title")&&(T.emit(i,"replace","h2"),d.preventDefault());break}case"Digit3":{D("title")&&(T.emit(i,"replace","h3"),d.preventDefault());break}case"Digit4":{D("title")&&(T.emit(i,"replace","h4"),d.preventDefault());break}case"Digit5":{D("title")&&(T.emit(i,"replace","h5"),d.preventDefault());break}case"Digit6":{D("title")&&(T.emit(i,"replace","h6"),d.preventDefault());break}case"ArrowUp":{D("sup")&&(T.emit(i,"replace","sup"),d.preventDefault());break}case"ArrowDown":{D("sub")&&(T.emit(i,"replace","sub"),d.preventDefault());break}case"KeyQ":{T.emit(i,"replace","quote"),d.preventDefault();break}case"KeyO":{D("orderedList")&&(T.emit(i,"replace","orderedList"),d.preventDefault());break}case"KeyC":{if(d.shiftKey)D("code")&&(T.emit(i,"replace","code"),d.preventDefault());else if(d.altKey)D("codeRow")&&(T.emit(i,"replace","codeRow"),d.preventDefault());else{d.preventDefault(),T.emit(i,"replace","ctrlC");break}break}case"KeyL":{D("link")&&(T.emit(i,"openModals","link"),d.preventDefault());break}case"KeyZ":{d.shiftKey?D("next")&&(T.emit(i,"ctrlShiftZ"),d.preventDefault()):D("revoke")&&(T.emit(i,"ctrlZ"),d.preventDefault());break}case"KeyF":{d.shiftKey&&D("prettier")&&(T.emit(i,"replace","prettier"),d.preventDefault());break}case"KeyT":{d.altKey&&d.shiftKey&&D("table")&&(T.emit(i,"replace","table"),d.preventDefault());break}case"KeyX":{T.emit(i,"replace","ctrlX"),d.preventDefault();break}case"KeyD":{d.preventDefault(),T.emit(i,"replace","ctrlD");break}}else d.code==="Tab"&&(d.preventDefault(),d.shiftKey?T.emit(i,"replace","shiftTab"):T.emit(i,"replace","tab"))},C=d=>{if(d.clipboardData&&d.clipboardData.files.length>0){const p=d.clipboardData.files[0];/image\/.*/.test(p.type)&&(T.emit(i,"uploadImage",[p]),d.preventDefault())}};se(()=>{n.previewOnly||(window.addEventListener("keydown",b),document.addEventListener("paste",C),T.on(i,{name:"onSave",callback(){n.onSave?n.onSave(n.modelValue):l.emit("onSave",n.modelValue)}}))}),Ke(()=>{n.previewOnly||(window.removeEventListener("keydown",b),document.removeEventListener("paste",C))})},nn=n=>{const{previewOnly:l,editorId:i,tabWidth:D,showCodeRowNumber:b,Cropper:C}=n;de("editorId",i),de("tabWidth",D);const d=ce(()=>{let f=Ze.atom;if(n.highlightCss)f=n.highlightCss;else switch(n.previewTheme){case"github":{n.theme==="dark"?f=Ze.githubDark:f=Ze.github;break}}return{js:n.highlightJs,css:f}});de("highlight",d),de("historyLength",n.historyLength),de("previewOnly",l),de("showCodeRowNumber",b);const p=ce(()=>{const f=$e($e({},Dt),n.languageUserDefined);return f[n.language]?f[n.language]:Dt["zh-CN"]});de("usedLanguageText",p),de("Cropper",C),de("previewTheme",ce(()=>n.previewTheme))};var un=ae({setup(){return()=>s("div",{class:`${m}-divider`},null)}});const Me=({instance:n,ctx:l,props:i={}},D="default")=>{const b=(n==null?void 0:n.$slots[D])||(l==null?void 0:l.slots[D]);return(b?b(n):"")||i[D]};var vt=ae({props:{trigger:{type:String,default:"hover"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}}},setup(n,l){const i=`${m}-dropdown-hidden`,D=he({overlayClass:[i],overlayStyle:{},triggerHover:!1,overlayHover:!1}),b=Q(),C=Q(),d=()=>{n.trigger==="hover"&&(D.triggerHover=!0);const x=b.value,A=C.value,B=x.getBoundingClientRect(),w=x.offsetTop,I=x.offsetLeft,L=B.height,H=B.width;D.overlayStyle=Je($e({},D.overlayStyle),{top:w+L+"px",left:I-A.offsetWidth/2+H/2+"px"}),n.onChange(!0)},p=()=>{D.overlayHover=!0};re(()=>n.visible,x=>{x?D.overlayClass=D.overlayClass.filter(A=>A!==i):D.overlayClass.push(i)});const f=x=>{const A=b.value,B=C.value;!A.contains(x.target)&&!B.contains(x.target)&&n.onChange(!1)};let F=-1;const y=x=>{b.value===x.target?D.triggerHover=!1:D.overlayHover=!1,clearTimeout(F),F=window.setTimeout(()=>{!D.overlayHover&&!D.triggerHover&&n.onChange(!1)},10)};return se(()=>{n.trigger==="click"?(b.value.addEventListener("click",d),document.addEventListener("click",f)):(b.value.addEventListener("mouseenter",d),b.value.addEventListener("mouseleave",y),C.value.addEventListener("mouseenter",p),C.value.addEventListener("mouseleave",y))}),Ke(()=>{n.trigger==="click"?(b.value.removeEventListener("click",d),document.removeEventListener("click",f)):(b.value.removeEventListener("mouseenter",d),b.value.removeEventListener("mouseleave",y),C.value.removeEventListener("mouseenter",p),C.value.removeEventListener("mouseleave",y))}),()=>{const x=Me({ctx:l}),A=Me({props:n,ctx:l},"overlay"),B=Nt(x instanceof Array?x[0]:x,{ref:b}),w=s("div",{class:[`${m}-dropdown`,D.overlayClass],style:D.overlayStyle,ref:C},[s("div",{class:`${m}-dropdown-overlay`},[A instanceof Array?A[0]:A])]);return[B,w]}}});const oe=(n,l=0,i=l)=>{n.setSelectionRange?setTimeout(()=>{n.setSelectionRange(l,i),n.focus()},0):console.log("\u65E0\u6CD5\u91CD\u7F6E\u5149\u6807\u4F4D\u7F6E\uFF01")},Xe=(n,l,i)=>{const{deviationStart:D=0,deviationEnd:b=0,direct:C=!1,select:d=!1}=i;let p="";if(n.selectionStart||n.selectionStart===0){const f=n.selectionStart,F=n.selectionEnd||0,{prefixVal:y=n.value.substring(0,f),subfixVal:x=n.value.substring(F,n.value.length)}=i;p=y+l+x,oe(n,d?f+D:f+l.length+b,f+l.length+b)}else p+=l;return C&&(n.value=p),p},ln=(n,l={newWindow:!0,nofollow:!0})=>{n||console.warn("\u65E0\u6548\u7684\u94FE\u63A5\uFF01");const i=document.createElement("a");i.href=n,i.style.display="none",l.newWindow&&(i.target="_blank"),l.nofollow&&(i.rel="noopener noreferrer"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},mt=(n,l)=>{const i=n.clientHeight,D=l.clientHeight,b=n.scrollHeight,C=l.scrollHeight,d=(b-i)/(C-D),p=an(()=>{n.removeEventListener("scroll",f),n.addEventListener("scroll",f),l.removeEventListener("scroll",f),l.addEventListener("scroll",f)},50),f=F=>{F.target===n?(l.removeEventListener("scroll",f),l.scrollTo({top:n.scrollTop/d}),p()):(n.removeEventListener("scroll",f),n.scrollTo({top:l.scrollTop*d}),p())};return p(),()=>{n.removeEventListener("scroll",f),l.removeEventListener("scroll",f)}},rn=(n,l="image.png")=>{const i=n.split(","),D=i[0].match(/:(.*?);/);if(D){const b=D[1],C=atob(i[1]);let d=C.length;const p=new Uint8Array(d);for(;d--;)p[d]=C.charCodeAt(d);return new File([p],l,{type:b})}return null},bt=n=>{if(!n.trim())return n;const l=n.split(`
`),i=['<span rn-wrapper aria-hidden="true">'];return l.forEach(()=>{i.push("<span></span>")}),i.push("</span>"),`<span class="code-block">${n}</span>${i.join("")}`},an=(n,l=200)=>{let i=0;return(...D)=>{i&&clearTimeout(i),i=window.setTimeout(()=>{n.apply(globalThis,D),i=0},l)}},Ct=(n,l)=>{const i=D=>{const b=n.parentElement||document.body,C=b.offsetWidth,d=b.offsetHeight,{clientWidth:p}=document.documentElement,{clientHeight:f}=document.documentElement,F=D.offsetX,y=D.offsetY,x=B=>{let w=B.x+document.body.scrollLeft-document.body.clientLeft-F,I=B.y+document.body.scrollTop-document.body.clientTop-y;w=w<1?1:w<p-C-1?w:p-C-1,I=I<1?1:I<f-d-1?I:f-d-1,l?l(w,I):(b.style.left=`${w}px`,b.style.top=`${I}px`)};document.addEventListener("mousemove",x);const A=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",A)};document.addEventListener("mouseup",A)};return n.addEventListener("mousedown",i),()=>{n.removeEventListener("mousedown",i)}};var Ft=ae({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClosed:{type:Function,default:()=>()=>{}},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>()=>{}}},setup(n,l){const i=Q(n.visible),D=Q([`${m}-modal`]),b=Q(),C=Q();let d=()=>{};const p=he({initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}});return se(()=>{d=Ct(C.value,(f,F)=>{p.initPos.left=f+"px",p.initPos.top=F+"px"})}),Ke(()=>{d()}),re(()=>n.isFullscreen,f=>{console.log(123),f?d():d=Ct(C.value,(F,y)=>{p.initPos.left=F+"px",p.initPos.top=y+"px"})}),re(()=>n.visible,f=>{f?(D.value.push("zoom-in"),i.value=f,xe(()=>{const F=b.value.offsetWidth/2,y=b.value.offsetHeight/2,x=document.documentElement.clientWidth/2,A=document.documentElement.clientHeight/2;p.initPos.left=x-F+"px",p.initPos.top=A-y+"px"}),setTimeout(()=>{D.value=D.value.filter(F=>F!=="zoom-in")},140)):(D.value.push("zoom-out"),setTimeout(()=>{D.value=D.value.filter(F=>F!=="zoom-out"),i.value=f},130))}),()=>{const f=Me({ctx:l}),F=Me({props:n,ctx:l},"title");return s("div",{style:{display:i.value?"block":"none"}},[s("div",{class:`${m}-modal-mask`,onClick:n.onClosed},null),s("div",{class:D.value,style:Je($e({},p.initPos),{width:n.width,height:n.height}),ref:b},[s("div",{class:`${m}-modal-header`,ref:C},[F||""]),s("div",{class:`${m}-modal-body`},[f]),s("div",{class:`${m}-modal-func`},[n.showAdjust&&s("div",{class:`${m}-modal-adjust`,onClick:y=>{y.stopPropagation(),n.isFullscreen?p.initPos=p.historyPos:(p.historyPos=p.initPos,p.initPos={left:"0",top:"0"}),n.onAdjust(!n.isFullscreen)}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":`#icon-${n.isFullscreen?"suoxiao":"fangda"}`},null)])]),s("div",{class:`${m}-modal-close`,onClick:y=>{y.stopPropagation(),n.onClosed&&n.onClosed()}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-close"},null)])])])])])}}}),sn=ae({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}}},setup(n){const l=K("usedLanguageText"),i=K("editorId"),D=ce(()=>{var C,d,p,f;switch(n.type){case"link":return`${(C=l.value.linkModalTips)==null?void 0:C.title}${(d=l.value.toolbarTips)==null?void 0:d.link}`;case"image":return`${(p=l.value.linkModalTips)==null?void 0:p.title}${(f=l.value.toolbarTips)==null?void 0:f.image}`;default:return""}}),b=he({desc:"",url:""});return re(()=>n.visible,C=>{C||setTimeout(()=>{b.desc="",b.url=""},200)}),()=>s(Ft,{title:D.value,visible:n.visible,onClosed:n.onCancel},{default:()=>{var C,d,p,f,F;return[s("div",{class:`${m}-form-item`},[s("label",{class:`${m}-lable`,for:`link-desc-${i}`},[(C=l.value.linkModalTips)==null?void 0:C.descLable]),s("input",{placeholder:(d=l.value.linkModalTips)==null?void 0:d.descLablePlaceHolder,class:`${m}-input`,id:`link-desc-${i}`,type:"text",value:b.desc,onChange:y=>{b.desc=y.target.value},autocomplete:"off"},null)]),s("div",{class:`${m}-form-item`},[s("label",{class:`${m}-lable`,for:`link-url-${i}`},[(p=l.value.linkModalTips)==null?void 0:p.urlLable]),s("input",{placeholder:(f=l.value.linkModalTips)==null?void 0:f.UrlLablePlaceHolder,class:`${m}-input`,id:`link-url-${i}`,type:"text",value:b.url,onChange:y=>{b.url=y.target.value},autocomplete:"off"},null)]),s("div",{class:`${m}-form-item`},[s("button",{class:[`${m}-btn`,`${m}-btn-row`],type:"button",onClick:()=>{n.onOk(b),b.desc="",b.url=""}},[(F=l.value.linkModalTips)==null?void 0:F.buttonOK])])]}})}}),on=ae({props:{visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}}},setup(n){const l=K("usedLanguageText"),i=K("editorId");let D=K("Cropper");const b=Q(),C=Q(),d=Q(),p=he({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let f=null;re(()=>n.visible,()=>{n.visible&&!p.cropperInited&&(D=D||window.Cropper,b.value.onchange=()=>{const x=b.value.files||[];if(p.imgSelected=!0,(x==null?void 0:x.length)>0){const A=new FileReader;A.onload=B=>{p.imgSrc=B.target.result,xe(()=>{f=new D(C.value,{viewMode:2,preview:`.${m}-clip-preview-target`})})},A.readAsDataURL(x[0])}})}),re(()=>[p.imgSelected],()=>{d.value.style=""}),re(()=>p.isFullscreen,()=>{xe(()=>{f==null||f.destroy(),d.value.style="",C.value&&(f=new D(C.value,{viewMode:2,preview:`.${m}-clip-preview-target`}))})});const F=ce(()=>p.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"421px"}),y=()=>{f.destroy(),b.value.value="",p.imgSelected=!1};return()=>{var x;return s(Ft,Kt({title:(x=l.value.clipModalTips)==null?void 0:x.title,visible:n.visible,onClosed:n.onCancel,showAdjust:!0,isFullscreen:p.isFullscreen,onAdjust:A=>{p.isFullscreen=A}},F.value),{default:()=>{var A;return[s("div",{class:`${m}-form-item ${m}-clip`},[s("div",{class:`${m}-clip-main`},[p.imgSelected?s("div",{class:`${m}-clip-cropper`},[s("img",{src:p.imgSrc,ref:C,style:{display:"none"}},null),s("div",{class:`${m}-clip-delete`,onClick:y},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-delete"},null)])])]):s("div",{class:`${m}-clip-upload`,onClick:()=>{b.value.click()}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-upload"},null)])])]),s("div",{class:`${m}-clip-preview`},[s("div",{class:`${m}-clip-preview-target`,ref:d},null)])]),s("div",{class:`${m}-form-item`},[s("button",{class:`${m}-btn`,type:"button",onClick:()=>{const B=f.getCroppedCanvas();T.emit(i,"uploadImage",[rn(B.toDataURL("image/png"))],n.onOk),y()}},[(A=l.value.linkModalTips)==null?void 0:A.buttonOK])]),s("input",{ref:b,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}},null)]}})}}}),cn=ae({props:{type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}}},setup(n){return()=>s(We,null,[s(sn,{type:n.type,visible:n.linkVisible,onOk:n.onOk,onCancel:n.onCancel},null),s(on,{visible:n.clipVisible,onOk:n.onOk,onCancel:n.onCancel},null)])}});const dn=n=>{let{screenfull:l}=n;const i=()=>{l.isEnabled?l.isFullscreen?l.exit():l.request():console.error("browser does not support screenfull!")},D=()=>{l=window.screenfull,l&&l.isEnabled&&l.on("change",()=>{n.updateSetting(!n.setting.fullscreen,"fullscreen")})};return se(()=>{l&&l.isEnabled&&l.on("change",()=>{n.updateSetting(!n.setting.fullscreen,"fullscreen")})}),{fullScreenHandler:i,screenfullLoad:D}};var fn=ae({name:"MDEditorToolbar",props:{prettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>()=>{}}},setup(n){const l=K("editorId"),i=K("usedLanguageText"),D=K("previewOnly"),{fullScreenHandler:b,screenfullLoad:C}=dn(n),d=he({title:!1,catalog:!1,image:!1}),p=(w,I)=>{T.emit(l,"replace",w,I)},f=he({type:"link",linkVisible:!1,clipVisible:!1}),F=Q();se(()=>{var w;T.on(l,{name:"openModals",callback(I){f.type=I,f.linkVisible=!0}}),(w=F.value)==null||w.addEventListener("mouseover",()=>{var I;((I=window.getSelection())==null?void 0:I.toString())||T.emit(l,"selectTextChange","")})});const y=ce(()=>{const w=n.toolbars.filter(W=>!n.toolbarsExclude.includes(W)),I=w.indexOf("="),L=I===-1?w:w.slice(0,I+1),H=I===-1?[]:w.slice(I,Number.MAX_SAFE_INTEGER);return[L,H]}),x=Q(),A=()=>{T.emit(l,"uploadImage",x.value.files),x.value.value=""};se(()=>{x.value.addEventListener("change",A)});const B=w=>{var I,L,H,W,M,Z,ie,ee,G,ue,te,fe,ge,me,Te,Ie,ze,be,Re,je,Le,J,Oe,De,ve,ne,Pe,Ce,He,Fe,pe,P;switch(w){case"-":return s(un,null,null);case"bold":return s("div",{class:`${m}-toolbar-item`,title:(I=i.value.toolbarTips)==null?void 0:I.bold,onClick:()=>{p("bold")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-bold"},null)])]);case"underline":return s("div",{class:`${m}-toolbar-item`,title:(L=i.value.toolbarTips)==null?void 0:L.underline,onClick:()=>{p("underline")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-underline"},null)])]);case"italic":return s("div",{class:`${m}-toolbar-item`,title:(H=i.value.toolbarTips)==null?void 0:H.italic,onClick:()=>{p("italic")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-italic"},null)])]);case"strikeThrough":return s("div",{class:`${m}-toolbar-item`,title:(W=i.value.toolbarTips)==null?void 0:W.strikeThrough,onClick:()=>{p("strikeThrough")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-strike-through"},null)])]);case"title":return s(vt,{visible:d.title,onChange:X=>{d.title=X},overlay:s("ul",{class:`${m}-menu`,onClick:()=>{d.title=!1}},[s("li",{class:`${m}-menu-item`,onClick:()=>{p("h1")}},[(M=i.value.titleItem)==null?void 0:M.h1]),s("li",{class:`${m}-menu-item`,onClick:()=>{p("h2")}},[(Z=i.value.titleItem)==null?void 0:Z.h2]),s("li",{class:`${m}-menu-item`,onClick:()=>{p("h3")}},[(ie=i.value.titleItem)==null?void 0:ie.h3]),s("li",{class:`${m}-menu-item`,onClick:()=>{p("h4")}},[(ee=i.value.titleItem)==null?void 0:ee.h4]),s("li",{class:`${m}-menu-item`,onClick:()=>{p("h5")}},[(G=i.value.titleItem)==null?void 0:G.h5]),s("li",{class:`${m}-menu-item`,onClick:()=>{p("h6")}},[(ue=i.value.titleItem)==null?void 0:ue.h6])])},{default:()=>{var X;return[s("div",{class:`${m}-toolbar-item`,title:(X=i.value.toolbarTips)==null?void 0:X.title},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-title"},null)])])]}});case"sub":return s("div",{class:`${m}-toolbar-item`,title:(te=i.value.toolbarTips)==null?void 0:te.sub,onClick:()=>{p("sub")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-sub"},null)])]);case"sup":return s("div",{class:`${m}-toolbar-item`,title:(fe=i.value.toolbarTips)==null?void 0:fe.sup,onClick:()=>{p("sup")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-sup"},null)])]);case"quote":return s("div",{class:`${m}-toolbar-item`,title:(ge=i.value.toolbarTips)==null?void 0:ge.quote,onClick:()=>{p("quote")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-quote"},null)])]);case"unorderedList":return s("div",{class:`${m}-toolbar-item`,title:(me=i.value.toolbarTips)==null?void 0:me.unorderedList,onClick:()=>{p("unorderedList")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-unordered-list"},null)])]);case"orderedList":return s("div",{class:`${m}-toolbar-item`,title:(Te=i.value.toolbarTips)==null?void 0:Te.orderedList,onClick:()=>{p("orderedList")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-ordered-list"},null)])]);case"codeRow":return s("div",{class:`${m}-toolbar-item`,title:(Ie=i.value.toolbarTips)==null?void 0:Ie.codeRow,onClick:()=>{p("codeRow")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-code-row"},null)])]);case"code":return s("div",{class:`${m}-toolbar-item`,title:(ze=i.value.toolbarTips)==null?void 0:ze.code,onClick:()=>{p("code")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-code"},null)])]);case"link":return s("div",{class:`${m}-toolbar-item`,title:(be=i.value.toolbarTips)==null?void 0:be.link,onClick:()=>{f.type="link",f.linkVisible=!0}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-link"},null)])]);case"image":return s(vt,{visible:d.image,onChange:X=>{d.image=X},overlay:s("ul",{class:`${m}-menu`,onClick:()=>{d.title=!1}},[s("li",{class:`${m}-menu-item`,onClick:()=>{f.type="image",f.linkVisible=!0}},[(Re=i.value.imgTitleItem)==null?void 0:Re.link]),s("li",{class:`${m}-menu-item`,onClick:()=>{x.value.click()}},[(je=i.value.imgTitleItem)==null?void 0:je.upload]),s("li",{class:`${m}-menu-item`,onClick:()=>{f.clipVisible=!0}},[(Le=i.value.imgTitleItem)==null?void 0:Le.clip2upload])])},{default:()=>{var X;return[s("div",{class:`${m}-toolbar-item`,title:(X=i.value.toolbarTips)==null?void 0:X.image},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-image"},null)])])]}});case"table":return s("div",{class:`${m}-toolbar-item`,title:(J=i.value.toolbarTips)==null?void 0:J.table,onClick:()=>{p("table")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-table"},null)])]);case"revoke":return s("div",{class:`${m}-toolbar-item`,title:(Oe=i.value.toolbarTips)==null?void 0:Oe.revoke,onClick:()=>{T.emit(l,"ctrlZ")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-revoke"},null)])]);case"next":return s("div",{class:`${m}-toolbar-item`,title:(De=i.value.toolbarTips)==null?void 0:De.next,onClick:()=>{T.emit(l,"ctrlShiftZ")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-next"},null)])]);case"save":return s("div",{class:`${m}-toolbar-item`,title:(ve=i.value.toolbarTips)==null?void 0:ve.save,onClick:()=>{T.emit(l,"onSave")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-baocun"},null)])]);case"prettier":return n.prettier?s("div",{class:`${m}-toolbar-item`,title:(ne=i.value.toolbarTips)==null?void 0:ne.prettier,onClick:()=>{p("prettier")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-prettier"},null)])]):"";case"pageFullscreen":return!n.setting.fullscreen&&s("div",{class:`${m}-toolbar-item`,title:(Pe=i.value.toolbarTips)==null?void 0:Pe.pageFullscreen,onClick:()=>{n.updateSetting(!n.setting.pageFullScreen,"pageFullScreen")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":`#icon-${n.setting.pageFullScreen?"suoxiao":"fangda"}`},null)])]);case"fullscreen":return s("div",{class:`${m}-toolbar-item`,title:(Ce=i.value.toolbarTips)==null?void 0:Ce.fullscreen,onClick:b},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":`#icon-${n.setting.fullscreen?"fullScreen-exit":"fullScreen"}`},null)])]);case"preview":return s("div",{class:`${m}-toolbar-item`,title:(He=i.value.toolbarTips)==null?void 0:He.preview,onClick:()=>{n.updateSetting(!n.setting.preview,"preview")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-preview"},null)])]);case"htmlPreview":return s("div",{class:`${m}-toolbar-item`,title:(Fe=i.value.toolbarTips)==null?void 0:Fe.htmlPreview,onClick:()=>{n.updateSetting(!n.setting.htmlPreview,"htmlPreview")}},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-coding"},null)])]);case"catalog":return s("div",{class:`${m}-toolbar-item`,title:(pe=i.value.toolbarTips)==null?void 0:pe.catalog,onClick:()=>{T.emit(l,"catalogShow")},key:"bar-catalog"},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-catalog"},null)])]);case"github":return s("div",{class:`${m}-toolbar-item`,title:(P=i.value.toolbarTips)==null?void 0:P.github,onClick:()=>ln("https://github.com/imzbf/md-editor-v3")},[s("svg",{class:`${m}-icon`,"aria-hidden":"true"},[s("use",{"xlink:href":"#icon-github"},null)])])}};return()=>{const w=y.value[0].map(L=>B(L)),I=y.value[1].map(L=>B(L));return s("div",{class:`${m}-toolbar-wrapper`},[s("div",{class:`${m}-toolbar`},[s("div",{class:`${m}-toolbar-left`,ref:F},[w]),s("div",{class:`${m}-toolbar-right`},[I])]),s("input",{ref:x,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),s(cn,{linkVisible:f.linkVisible,clipVisible:f.clipVisible,type:f.type,onCancel:()=>{f.linkVisible=!1,f.clipVisible=!1},onOk:L=>{L&&p(f.type,{desc:L.desc,url:L.url}),f.linkVisible=!1,f.clipVisible=!1}},null),!D&&n.screenfull===null&&s(we,{to:"head"},{default:()=>[s("script",{src:n.screenfullJs,onLoad:C},null)]})])}}}),pn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},kt={exports:{}};(function(n,l){(function(i,D){n.exports=D()})(pn,function(){function i(h,a){for(var c=0;c<a.length;c++){var e=a[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(h,e.key,e)}}function D(h,a,c){return a&&i(h.prototype,a),c&&i(h,c),h}function b(h,a){if(!!h){if(typeof h=="string")return C(h,a);var c=Object.prototype.toString.call(h).slice(8,-1);if(c==="Object"&&h.constructor&&(c=h.constructor.name),c==="Map"||c==="Set")return Array.from(h);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return C(h,a)}}function C(h,a){(a==null||a>h.length)&&(a=h.length);for(var c=0,e=new Array(a);c<a;c++)e[c]=h[c];return e}function d(h,a){var c=typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(c)return(c=c.call(h)).next.bind(c);if(Array.isArray(h)||(c=b(h))||a&&h&&typeof h.length=="number"){c&&(h=c);var e=0;return function(){return e>=h.length?{done:!0}:{done:!1,value:h[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p={exports:{}};function f(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function F(h){p.exports.defaults=h}p.exports={defaults:f(),getDefaults:f,changeDefaults:F};var y=/[&<>"']/,x=/[&<>"']/g,A=/[<>"']|&(?!#?\w+;)/,B=/[<>"']|&(?!#?\w+;)/g,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},I=function(a){return w[a]};function L(h,a){if(a){if(y.test(h))return h.replace(x,I)}else if(A.test(h))return h.replace(B,I);return h}var H=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function W(h){return h.replace(H,function(a,c){return c=c.toLowerCase(),c==="colon"?":":c.charAt(0)==="#"?c.charAt(1)==="x"?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(+c.substring(1)):""})}var M=/(^|[^\[])\^/g;function Z(h,a){h=h.source||h,a=a||"";var c={replace:function(t,u){return u=u.source||u,u=u.replace(M,"$1"),h=h.replace(t,u),c},getRegex:function(){return new RegExp(h,a)}};return c}var ie=/[^\w:]/g,ee=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function G(h,a,c){if(h){var e;try{e=decodeURIComponent(W(c)).replace(ie,"").toLowerCase()}catch{return null}if(e.indexOf("javascript:")===0||e.indexOf("vbscript:")===0||e.indexOf("data:")===0)return null}a&&!ee.test(c)&&(c=me(a,c));try{c=encodeURI(c).replace(/%25/g,"%")}catch{return null}return c}var ue={},te=/^[^:]+:\/*[^/]*$/,fe=/^([^:]+:)[\s\S]*$/,ge=/^([^:]+:\/*[^/]*)[\s\S]*$/;function me(h,a){ue[" "+h]||(te.test(h)?ue[" "+h]=h+"/":ue[" "+h]=be(h,"/",!0)),h=ue[" "+h];var c=h.indexOf(":")===-1;return a.substring(0,2)==="//"?c?a:h.replace(fe,"$1")+a:a.charAt(0)==="/"?c?a:h.replace(ge,"$1")+a:h+a}var Te={exec:function(){}};function Ie(h){for(var a=1,c,e;a<arguments.length;a++){c=arguments[a];for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(h[e]=c[e])}return h}function ze(h,a){var c=h.replace(/\|/g,function(u,o,r){for(var g=!1,v=o;--v>=0&&r[v]==="\\";)g=!g;return g?"|":" |"}),e=c.split(/ \|/),t=0;if(e.length>a)e.splice(a);else for(;e.length<a;)e.push("");for(;t<e.length;t++)e[t]=e[t].trim().replace(/\\\|/g,"|");return e}function be(h,a,c){var e=h.length;if(e===0)return"";for(var t=0;t<e;){var u=h.charAt(e-t-1);if(u===a&&!c)t++;else if(u!==a&&c)t++;else break}return h.substr(0,e-t)}function Re(h,a){if(h.indexOf(a[1])===-1)return-1;for(var c=h.length,e=0,t=0;t<c;t++)if(h[t]==="\\")t++;else if(h[t]===a[0])e++;else if(h[t]===a[1]&&(e--,e<0))return t;return-1}function je(h){h&&h.sanitize&&!h.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Le(h,a){if(a<1)return"";for(var c="";a>1;)a&1&&(c+=h),a>>=1,h+=h;return c+h}var J={escape:L,unescape:W,edit:Z,cleanUrl:G,resolveUrl:me,noopTest:Te,merge:Ie,splitCells:ze,rtrim:be,findClosingBracket:Re,checkSanitizeDeprecation:je,repeatString:Le},Oe=p.exports.defaults,De=J.rtrim,ve=J.splitCells,ne=J.escape,Pe=J.findClosingBracket;function Ce(h,a,c){var e=a.href,t=a.title?ne(a.title):null,u=h[1].replace(/\\([\[\]])/g,"$1");return h[0].charAt(0)!=="!"?{type:"link",raw:c,href:e,title:t,text:u}:{type:"image",raw:c,href:e,title:t,text:ne(u)}}function He(h,a){var c=h.match(/^(\s+)(?:```)/);if(c===null)return a;var e=c[1];return a.split(`
`).map(function(t){var u=t.match(/^\s+/);if(u===null)return t;var o=u[0];return o.length>=e.length?t.slice(e.length):t}).join(`
`)}var Fe=function(){function h(c){this.options=c||Oe}var a=h.prototype;return a.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:`
`}},a.code=function(e){var t=this.rules.block.code.exec(e);if(t){var u=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?u:De(u,`
`)}}},a.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var u=t[0],o=He(u,t[3]||"");return{type:"code",raw:u,lang:t[2]?t[2].trim():t[2],text:o}}},a.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var u=t[2].trim();if(/#$/.test(u)){var o=De(u,"#");(this.options.pedantic||!o||/ $/.test(o))&&(u=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:u}}},a.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var u={type:"table",header:ve(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split(`
`):[],raw:t[0]};if(u.header.length===u.align.length){var o=u.align.length,r;for(r=0;r<o;r++)/^ *-+: *$/.test(u.align[r])?u.align[r]="right":/^ *:-+: *$/.test(u.align[r])?u.align[r]="center":/^ *:-+ *$/.test(u.align[r])?u.align[r]="left":u.align[r]=null;for(o=u.cells.length,r=0;r<o;r++)u.cells[r]=ve(u.cells[r],u.header.length);return u}}},a.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},a.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var u=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:u}}},a.list=function(e){var t=this.rules.block.list.exec(e);if(t){var u=t[0],o=t[2],r=o.length>1,g={type:"list",raw:u,ordered:r,start:r?+o.slice(0,-1):"",loose:!1,items:[]},v=t[0].match(this.rules.block.item),k=!1,E,j,O,z,S,U,q,Y,le,N=v.length;O=this.rules.block.listItemStart.exec(v[0]);for(var V=0;V<N;V++){if(E=v[V],u=E,this.options.pedantic||(le=E.match(new RegExp("\\n\\s*\\n {0,"+(O[0].length-1)+"}\\S")),le&&(S=E.length-le.index+v.slice(V+1).join(`
`).length,g.raw=g.raw.substring(0,g.raw.length-S),E=E.substring(0,le.index),u=E,N=V+1)),V!==N-1){if(z=this.rules.block.listItemStart.exec(v[V+1]),this.options.pedantic?z[1].length>O[1].length:z[1].length>=O[0].length||z[1].length>3){v.splice(V,2,v[V]+(!this.options.pedantic&&z[1].length<O[0].length&&!v[V].match(/\n$/)?"":`
`)+v[V+1]),V--,N--;continue}else(!this.options.pedantic||this.options.smartLists?z[2][z[2].length-1]!==o[o.length-1]:r===(z[2].length===1))&&(S=v.slice(V+1).join(`
`).length,g.raw=g.raw.substring(0,g.raw.length-S),V=N-1);O=z}j=E.length,E=E.replace(/^ *([*+-]|\d+[.)]) ?/,""),~E.indexOf(`
 `)&&(j-=E.length,E=this.options.pedantic?E.replace(/^ {1,4}/gm,""):E.replace(new RegExp("^ {1,"+j+"}","gm"),"")),E=De(E,`
`),V!==N-1&&(u=u+`
`),U=k||/\n\n(?!\s*$)/.test(u),V!==N-1&&(k=u.slice(-2)===`

`,U||(U=k)),U&&(g.loose=!0),this.options.gfm&&(q=/^\[[ xX]\] /.test(E),Y=void 0,q&&(Y=E[1]!==" ",E=E.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:u,task:q,checked:Y,loose:U,text:E})}return g}},a.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):ne(t[0]):t[0]}},a.def=function(e){var t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));var u=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:u,raw:t[0],href:t[2],title:t[3]}}},a.table=function(e){var t=this.rules.block.table.exec(e);if(t){var u={type:"table",header:ve(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split(`
`):[]};if(u.header.length===u.align.length){u.raw=t[0];var o=u.align.length,r;for(r=0;r<o;r++)/^ *-+: *$/.test(u.align[r])?u.align[r]="right":/^ *:-+: *$/.test(u.align[r])?u.align[r]="center":/^ *:-+ *$/.test(u.align[r])?u.align[r]="left":u.align[r]=null;for(o=u.cells.length,r=0;r<o;r++)u.cells[r]=ve(u.cells[r].replace(/^ *\| *| *\| *$/g,""),u.header.length);return u}}},a.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1]}},a.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1]}},a.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}},a.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ne(t[1])}},a.tag=function(e,t,u){var o=this.rules.inline.tag.exec(e);if(o)return!t&&/^<a /i.test(o[0])?t=!0:t&&/^<\/a>/i.test(o[0])&&(t=!1),!u&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?u=!0:u&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(u=!1),{type:this.options.sanitize?"text":"html",raw:o[0],inLink:t,inRawBlock:u,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):ne(o[0]):o[0]}},a.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var u=t[2].trim();if(!this.options.pedantic&&/^</.test(u)){if(!/>$/.test(u))return;var o=De(u.slice(0,-1),"\\");if((u.length-o.length)%2==0)return}else{var r=Pe(t[2],"()");if(r>-1){var g=t[0].indexOf("!")===0?5:4,v=g+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,v).trim(),t[3]=""}}var k=t[2],E="";if(this.options.pedantic){var j=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(k);j&&(k=j[1],E=j[3])}else E=t[3]?t[3].slice(1,-1):"";return k=k.trim(),/^</.test(k)&&(this.options.pedantic&&!/>$/.test(u)?k=k.slice(1):k=k.slice(1,-1)),Ce(t,{href:k&&k.replace(this.rules.inline._escapes,"$1"),title:E&&E.replace(this.rules.inline._escapes,"$1")},t[0])}},a.reflink=function(e,t){var u;if((u=this.rules.inline.reflink.exec(e))||(u=this.rules.inline.nolink.exec(e))){var o=(u[2]||u[1]).replace(/\s+/g," ");if(o=t[o.toLowerCase()],!o||!o.href){var r=u[0].charAt(0);return{type:"text",raw:r,text:r}}return Ce(u,o,u[0])}},a.emStrong=function(e,t,u){u===void 0&&(u="");var o=this.rules.inline.emStrong.lDelim.exec(e);if(!!o&&!(o[3]&&u.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=o[1]||o[2]||"";if(!r||r&&(u===""||this.rules.inline.punctuation.exec(u))){var g=o[0].length-1,v,k,E=g,j=0,O=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(O.lastIndex=0,t=t.slice(-1*e.length+g);(o=O.exec(t))!=null;)if(v=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!!v){if(k=v.length,o[3]||o[4]){E+=k;continue}else if((o[5]||o[6])&&g%3&&!((g+k)%3)){j+=k;continue}if(E-=k,!(E>0))return k=Math.min(k,k+E+j),Math.min(g,k)%2?{type:"em",raw:e.slice(0,g+o.index+k+1),text:e.slice(1,g+o.index+k)}:{type:"strong",raw:e.slice(0,g+o.index+k+1),text:e.slice(2,g+o.index+k-1)}}}}},a.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var u=t[2].replace(/\n/g," "),o=/[^ ]/.test(u),r=/^ /.test(u)&&/ $/.test(u);return o&&r&&(u=u.substring(1,u.length-1)),u=ne(u,!0),{type:"codespan",raw:t[0],text:u}}},a.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},a.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},a.autolink=function(e,t){var u=this.rules.inline.autolink.exec(e);if(u){var o,r;return u[2]==="@"?(o=ne(this.options.mangle?t(u[1]):u[1]),r="mailto:"+o):(o=ne(u[1]),r=o),{type:"link",raw:u[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}},a.url=function(e,t){var u;if(u=this.rules.inline.url.exec(e)){var o,r;if(u[2]==="@")o=ne(this.options.mangle?t(u[0]):u[0]),r="mailto:"+o;else{var g;do g=u[0],u[0]=this.rules.inline._backpedal.exec(u[0])[0];while(g!==u[0]);o=ne(u[0]),u[1]==="www."?r="http://"+o:r=o}return{type:"link",raw:u[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}},a.inlineText=function(e,t,u){var o=this.rules.inline.text.exec(e);if(o){var r;return t?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):ne(o[0]):o[0]:r=ne(this.options.smartypants?u(o[0]):o[0]),{type:"text",raw:o[0],text:r}}},h}(),pe=J.noopTest,P=J.edit,X=J.merge,_={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:pe,table:pe,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};_._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,_.def=P(_.def).replace("label",_._label).replace("title",_._title).getRegex(),_.bullet=/(?:[*+-]|\d{1,9}[.)])/,_.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,_.item=P(_.item,"gm").replace(/bull/g,_.bullet).getRegex(),_.listItemStart=P(/^( *)(bull) */).replace("bull",_.bullet).getRegex(),_.list=P(_.list).replace(/bull/g,_.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_.def.source+")").getRegex(),_._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,_.html=P(_.html,"i").replace("comment",_._comment).replace("tag",_._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_.paragraph=P(_._paragraph).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.blockquote=P(_.blockquote).replace("paragraph",_.paragraph).getRegex(),_.normal=X({},_),_.gfm=X({},_.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),_.gfm.nptable=P(_.gfm.nptable).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.gfm.table=P(_.gfm.table).replace("hr",_.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_._tag).getRegex(),_.pedantic=X({},_.normal,{html:P(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pe,paragraph:P(_.normal._paragraph).replace("hr",_.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:pe,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:pe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};$._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",$.punctuation=P($.punctuation).replace(/punctuation/g,$._punctuation).getRegex(),$.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$.escapedEmSt=/\\\*|\\_/g,$._comment=P(_._comment).replace("(?:-->|$)","-->").getRegex(),$.emStrong.lDelim=P($.emStrong.lDelim).replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimAst=P($.emStrong.rDelimAst,"g").replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimUnd=P($.emStrong.rDelimUnd,"g").replace(/punct/g,$._punctuation).getRegex(),$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$.autolink=P($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex(),$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$.tag=P($.tag).replace("comment",$._comment).replace("attribute",$._attribute).getRegex(),$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$.link=P($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex(),$.reflink=P($.reflink).replace("label",$._label).getRegex(),$.reflinkSearch=P($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex(),$.normal=X({},$),$.pedantic=X({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:P(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:P(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()}),$.gfm=X({},$.normal,{escape:P($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),$.gfm.url=P($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex(),$.breaks=X({},$.gfm,{br:P($.br).replace("{2,}","*").getRegex(),text:P($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Qe={block:_,inline:$},wt=Fe,xt=p.exports.defaults,Ue=Qe.block,ke=Qe.inline,et=J.repeatString;function $t(h){return h.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function tt(h){var a="",c,e,t=h.length;for(c=0;c<t;c++)e=h.charCodeAt(c),Math.random()>.5&&(e="x"+e.toString(16)),a+="&#"+e+";";return a}var Bt=function(){function h(c){this.tokens=[],this.tokens.links=Object.create(null),this.options=c||xt,this.options.tokenizer=this.options.tokenizer||new wt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:Ue.normal,inline:ke.normal};this.options.pedantic?(e.block=Ue.pedantic,e.inline=ke.pedantic):this.options.gfm&&(e.block=Ue.gfm,this.options.breaks?e.inline=ke.breaks:e.inline=ke.gfm),this.tokenizer.rules=e}h.lex=function(e,t){var u=new h(t);return u.lex(e)},h.lexInline=function(e,t){var u=new h(t);return u.inlineTokens(e)};var a=h.prototype;return a.lex=function(e){return e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},a.blockTokens=function(e,t,u){var o=this;t===void 0&&(t=[]),u===void 0&&(u=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));for(var r,g,v,k,E,j;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(z){return(r=z.call(o,e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1}))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.type&&t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),k=t[t.length-1],k&&k.type==="paragraph"?(k.raw+=`
`+r.raw,k.text+=`
`+r.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.nptable(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],u),t.push(r);continue}if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),v=r.items.length,g=0;g<v;g++)r.items[g].tokens=this.blockTokens(r.items[g].text,[],!1);t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(u&&(r=this.tokenizer.def(e))){e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(E=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var z=1/0,S=e.slice(1),U=void 0;o.options.extensions.startBlock.forEach(function(q){U=q.call(this,S),typeof U=="number"&&U>=0&&(z=Math.min(z,U))}),z<1/0&&z>=0&&(E=e.substring(0,z+1))}(),u&&(r=this.tokenizer.paragraph(E))){k=t[t.length-1],j&&k.type==="paragraph"?(k.raw+=`
`+r.raw,k.text+=`
`+r.text):t.push(r),j=E.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),k=t[t.length-1],k&&k.type==="text"?(k.raw+=`
`+r.raw,k.text+=`
`+r.text):t.push(r);continue}if(e){var O="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(O);break}else throw new Error(O)}}return t},a.inline=function(e){var t,u,o,r,g,v,k=e.length;for(t=0;t<k;t++)switch(v=e[t],v.type){case"paragraph":case"text":case"heading":{v.tokens=[],this.inlineTokens(v.text,v.tokens);break}case"table":{for(v.tokens={header:[],cells:[]},r=v.header.length,u=0;u<r;u++)v.tokens.header[u]=[],this.inlineTokens(v.header[u],v.tokens.header[u]);for(r=v.cells.length,u=0;u<r;u++)for(g=v.cells[u],v.tokens.cells[u]=[],o=0;o<g.length;o++)v.tokens.cells[u][o]=[],this.inlineTokens(g[o],v.tokens.cells[u][o]);break}case"blockquote":{this.inline(v.tokens);break}case"list":{for(r=v.items.length,u=0;u<r;u++)this.inline(v.items[u].tokens);break}}return e},a.inlineTokens=function(e,t,u,o){var r=this;t===void 0&&(t=[]),u===void 0&&(u=!1),o===void 0&&(o=!1);var g,v,k,E=e,j,O,z;if(this.tokens.links){var S=Object.keys(this.tokens.links);if(S.length>0)for(;(j=this.tokenizer.rules.inline.reflinkSearch.exec(E))!=null;)S.includes(j[0].slice(j[0].lastIndexOf("[")+1,-1))&&(E=E.slice(0,j.index)+"["+et("a",j[0].length-2)+"]"+E.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(j=this.tokenizer.rules.inline.blockSkip.exec(E))!=null;)E=E.slice(0,j.index)+"["+et("a",j[0].length-2)+"]"+E.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(j=this.tokenizer.rules.inline.escapedEmSt.exec(E))!=null;)E=E.slice(0,j.index)+"++"+E.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(O||(z=""),O=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(q){return(g=q.call(r,e,t))?(e=e.substring(g.raw.length),t.push(g),!0):!1}))){if(g=this.tokenizer.escape(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.tag(e,u,o)){e=e.substring(g.raw.length),u=g.inLink,o=g.inRawBlock,v=t[t.length-1],v&&g.type==="text"&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(g=this.tokenizer.link(e)){e=e.substring(g.raw.length),g.type==="link"&&(g.tokens=this.inlineTokens(g.text,[],!0,o)),t.push(g);continue}if(g=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(g.raw.length),v=t[t.length-1],g.type==="link"?(g.tokens=this.inlineTokens(g.text,[],!0,o),t.push(g)):v&&g.type==="text"&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(g=this.tokenizer.emStrong(e,E,z)){e=e.substring(g.raw.length),g.tokens=this.inlineTokens(g.text,[],u,o),t.push(g);continue}if(g=this.tokenizer.codespan(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.br(e)){e=e.substring(g.raw.length),t.push(g);continue}if(g=this.tokenizer.del(e)){e=e.substring(g.raw.length),g.tokens=this.inlineTokens(g.text,[],u,o),t.push(g);continue}if(g=this.tokenizer.autolink(e,tt)){e=e.substring(g.raw.length),t.push(g);continue}if(!u&&(g=this.tokenizer.url(e,tt))){e=e.substring(g.raw.length),t.push(g);continue}if(k=e,this.options.extensions&&this.options.extensions.startInline&&function(){var q=1/0,Y=e.slice(1),le=void 0;r.options.extensions.startInline.forEach(function(N){le=N.call(this,Y),typeof le=="number"&&le>=0&&(q=Math.min(q,le))}),q<1/0&&q>=0&&(k=e.substring(0,q+1))}(),g=this.tokenizer.inlineText(k,o,$t)){e=e.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(z=g.raw.slice(-1)),O=!0,v=t[t.length-1],v&&v.type==="text"?(v.raw+=g.raw,v.text+=g.text):t.push(g);continue}if(e){var U="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(U);break}else throw new Error(U)}}return t},D(h,null,[{key:"rules",get:function(){return{block:Ue,inline:ke}}}]),h}(),St=p.exports.defaults,nt=J.cleanUrl,qe=J.escape,ut=function(){function h(c){this.options=c||St}var a=h.prototype;return a.code=function(e,t,u){var o=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,o);r!=null&&r!==e&&(u=!0,e=r)}return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+qe(o,!0)+'">'+(u?e:qe(e,!0))+`</code></pre>
`:"<pre><code>"+(u?e:qe(e,!0))+`</code></pre>
`},a.blockquote=function(e){return`<blockquote>
`+e+`</blockquote>
`},a.html=function(e){return e},a.heading=function(e,t,u,o){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+o.slug(u)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`},a.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},a.list=function(e,t,u){var o=t?"ol":"ul",r=t&&u!==1?' start="'+u+'"':"";return"<"+o+r+`>
`+e+"</"+o+`>
`},a.listitem=function(e){return"<li>"+e+`</li>
`},a.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.paragraph=function(e){return"<p>"+e+`</p>
`},a.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`},a.tablerow=function(e){return`<tr>
`+e+`</tr>
`},a.tablecell=function(e,t){var u=t.header?"th":"td",o=t.align?"<"+u+' align="'+t.align+'">':"<"+u+">";return o+e+"</"+u+`>
`},a.strong=function(e){return"<strong>"+e+"</strong>"},a.em=function(e){return"<em>"+e+"</em>"},a.codespan=function(e){return"<code>"+e+"</code>"},a.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.del=function(e){return"<del>"+e+"</del>"},a.link=function(e,t,u){if(e=nt(this.options.sanitize,this.options.baseUrl,e),e===null)return u;var o='<a href="'+qe(e)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+u+"</a>",o},a.image=function(e,t,u){if(e=nt(this.options.sanitize,this.options.baseUrl,e),e===null)return u;var o='<img src="'+e+'" alt="'+u+'"';return t&&(o+=' title="'+t+'"'),o+=this.options.xhtml?"/>":">",o},a.text=function(e){return e},h}(),lt=function(){function h(){}var a=h.prototype;return a.strong=function(e){return e},a.em=function(e){return e},a.codespan=function(e){return e},a.del=function(e){return e},a.html=function(e){return e},a.text=function(e){return e},a.link=function(e,t,u){return""+u},a.image=function(e,t,u){return""+u},a.br=function(){return""},h}(),it=function(){function h(){this.seen={}}var a=h.prototype;return a.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},a.getNextSafeSlug=function(e,t){var u=e,o=0;if(this.seen.hasOwnProperty(u)){o=this.seen[e];do o++,u=e+"-"+o;while(this.seen.hasOwnProperty(u))}return t||(this.seen[e]=o,this.seen[u]=0),u},a.slug=function(e,t){t===void 0&&(t={});var u=this.serialize(e);return this.getNextSafeSlug(u,t.dryrun)},h}(),_t=ut,Tt=lt,It=it,zt=p.exports.defaults,Rt=J.unescape,jt=function(){function h(c){this.options=c||zt,this.options.renderer=this.options.renderer||new _t,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Tt,this.slugger=new It}h.parse=function(e,t){var u=new h(t);return u.parse(e)},h.parseInline=function(e,t){var u=new h(t);return u.parseInline(e)};var a=h.prototype;return a.parse=function(e,t){t===void 0&&(t=!0);var u="",o,r,g,v,k,E,j,O,z,S,U,q,Y,le,N,V,ct,Ae,Ve,dt=e.length;for(o=0;o<dt;o++){if(S=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[S.type]&&(Ve=this.options.extensions.renderers[S.type].call(this,S),Ve!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(S.type))){u+=Ve||"";continue}switch(S.type){case"space":continue;case"hr":{u+=this.renderer.hr();continue}case"heading":{u+=this.renderer.heading(this.parseInline(S.tokens),S.depth,Rt(this.parseInline(S.tokens,this.textRenderer)),this.slugger);continue}case"code":{u+=this.renderer.code(S.text,S.lang,S.escaped);continue}case"table":{for(O="",j="",v=S.header.length,r=0;r<v;r++)j+=this.renderer.tablecell(this.parseInline(S.tokens.header[r]),{header:!0,align:S.align[r]});for(O+=this.renderer.tablerow(j),z="",v=S.cells.length,r=0;r<v;r++){for(E=S.tokens.cells[r],j="",k=E.length,g=0;g<k;g++)j+=this.renderer.tablecell(this.parseInline(E[g]),{header:!1,align:S.align[g]});z+=this.renderer.tablerow(j)}u+=this.renderer.table(O,z);continue}case"blockquote":{z=this.parse(S.tokens),u+=this.renderer.blockquote(z);continue}case"list":{for(U=S.ordered,q=S.start,Y=S.loose,v=S.items.length,z="",r=0;r<v;r++)N=S.items[r],V=N.checked,ct=N.task,le="",N.task&&(Ae=this.renderer.checkbox(V),Y?N.tokens.length>0&&N.tokens[0].type==="text"?(N.tokens[0].text=Ae+" "+N.tokens[0].text,N.tokens[0].tokens&&N.tokens[0].tokens.length>0&&N.tokens[0].tokens[0].type==="text"&&(N.tokens[0].tokens[0].text=Ae+" "+N.tokens[0].tokens[0].text)):N.tokens.unshift({type:"text",text:Ae}):le+=Ae),le+=this.parse(N.tokens,Y),z+=this.renderer.listitem(le,ct,V);u+=this.renderer.list(z,U,q);continue}case"html":{u+=this.renderer.html(S.text);continue}case"paragraph":{u+=this.renderer.paragraph(this.parseInline(S.tokens));continue}case"text":{for(z=S.tokens?this.parseInline(S.tokens):S.text;o+1<dt&&e[o+1].type==="text";)S=e[++o],z+=`
`+(S.tokens?this.parseInline(S.tokens):S.text);u+=t?this.renderer.paragraph(z):z;continue}default:{var ft='Token with "'+S.type+'" type was not found.';if(this.options.silent){console.error(ft);return}else throw new Error(ft)}}}return u},a.parseInline=function(e,t){t=t||this.renderer;var u="",o,r,g,v=e.length;for(o=0;o<v;o++){if(r=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(g=this.options.extensions.renderers[r.type].call(this,r),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){u+=g||"";continue}switch(r.type){case"escape":{u+=t.text(r.text);break}case"html":{u+=t.html(r.text);break}case"link":{u+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{u+=t.image(r.href,r.title,r.text);break}case"strong":{u+=t.strong(this.parseInline(r.tokens,t));break}case"em":{u+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{u+=t.codespan(r.text);break}case"br":{u+=t.br();break}case"del":{u+=t.del(this.parseInline(r.tokens,t));break}case"text":{u+=t.text(r.text);break}default:{var k='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(k);return}else throw new Error(k)}}}return u},h}(),Ee=Bt,ye=jt,rt=Fe,at=ut,Lt=lt,Ot=it,Ne=J.merge,st=J.checkSanitizeDeprecation,ot=J.escape,Pt=p.exports.getDefaults,Ht=p.exports.changeDefaults,Ut=p.exports.defaults;function R(h,a,c){if(typeof h=="undefined"||h===null)throw new Error("marked(): input parameter is undefined or null");if(typeof h!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(h)+", string expected");if(typeof a=="function"&&(c=a,a=null),a=Ne({},R.defaults,a||{}),st(a),c){var e=a.highlight,t;try{t=Ee.lex(h,a)}catch(g){return c(g)}var u=function(v){var k;if(!v)try{a.walkTokens&&R.walkTokens(t,a.walkTokens),k=ye.parse(t,a)}catch(E){v=E}return a.highlight=e,v?c(v):c(null,k)};if(!e||e.length<3||(delete a.highlight,!t.length))return u();var o=0;R.walkTokens(t,function(g){g.type==="code"&&(o++,setTimeout(function(){e(g.text,g.lang,function(v,k){if(v)return u(v);k!=null&&k!==g.text&&(g.text=k,g.escaped=!0),o--,o===0&&u()})},0))}),o===0&&u();return}try{var r=Ee.lex(h,a);return a.walkTokens&&R.walkTokens(r,a.walkTokens),ye.parse(r,a)}catch(g){if(g.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+ot(g.message+"",!0)+"</pre>";throw g}}R.options=R.setOptions=function(h){return Ne(R.defaults,h),Ht(R.defaults),R},R.getDefaults=Pt,R.defaults=Ut,R.use=function(){for(var h=this,a=arguments.length,c=new Array(a),e=0;e<a;e++)c[e]=arguments[e];var t=Ne.apply(void 0,[{}].concat(c)),u=R.defaults.extensions||{renderers:{},childTokens:{}},o;c.forEach(function(r){if(r.extensions&&(o=!0,r.extensions.forEach(function(v){if(!v.name)throw new Error("extension name required");if(v.renderer){var k=u.renderers?u.renderers[v.name]:null;k?u.renderers[v.name]=function(){for(var E=arguments.length,j=new Array(E),O=0;O<E;O++)j[O]=arguments[O];var z=v.renderer.apply(this,j);return z===!1&&(z=k.apply(this,j)),z}:u.renderers[v.name]=v.renderer}if(v.tokenizer){if(!v.level||v.level!=="block"&&v.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");u[v.level]?u[v.level].unshift(v.tokenizer):u[v.level]=[v.tokenizer],v.start&&(v.level==="block"?u.startBlock?u.startBlock.push(v.start):u.startBlock=[v.start]:v.level==="inline"&&(u.startInline?u.startInline.push(v.start):u.startInline=[v.start]))}v.childTokens&&(u.childTokens[v.name]=v.childTokens)})),r.renderer&&function(){var v=R.defaults.renderer||new at,k=function(O){var z=v[O];v[O]=function(){for(var S=arguments.length,U=new Array(S),q=0;q<S;q++)U[q]=arguments[q];var Y=r.renderer[O].apply(v,U);return Y===!1&&(Y=z.apply(v,U)),Y}};for(var E in r.renderer)k(E);t.renderer=v}(),r.tokenizer&&function(){var v=R.defaults.tokenizer||new rt,k=function(O){var z=v[O];v[O]=function(){for(var S=arguments.length,U=new Array(S),q=0;q<S;q++)U[q]=arguments[q];var Y=r.tokenizer[O].apply(v,U);return Y===!1&&(Y=z.apply(v,U)),Y}};for(var E in r.tokenizer)k(E);t.tokenizer=v}(),r.walkTokens){var g=R.defaults.walkTokens;t.walkTokens=function(v){r.walkTokens.call(h,v),g&&g(v)}}o&&(t.extensions=u),R.setOptions(t)})},R.walkTokens=function(h,a){for(var c=function(){var o=t.value;switch(a(o),o.type){case"table":{for(var r=d(o.tokens.header),g;!(g=r()).done;){var v=g.value;R.walkTokens(v,a)}for(var k=d(o.tokens.cells),E;!(E=k()).done;)for(var j=E.value,O=d(j),z;!(z=O()).done;){var S=z.value;R.walkTokens(S,a)}break}case"list":{R.walkTokens(o.items,a);break}default:R.defaults.extensions&&R.defaults.extensions.childTokens&&R.defaults.extensions.childTokens[o.type]?R.defaults.extensions.childTokens[o.type].forEach(function(U){R.walkTokens(o[U],a)}):o.tokens&&R.walkTokens(o.tokens,a)}},e=d(h),t;!(t=e()).done;)c()},R.parseInline=function(h,a){if(typeof h=="undefined"||h===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof h!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(h)+", string expected");a=Ne({},R.defaults,a||{}),st(a);try{var c=Ee.lexInline(h,a);return a.walkTokens&&R.walkTokens(c,a.walkTokens),ye.parseInline(c,a)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+ot(e.message+"",!0)+"</pre>";throw e}},R.Parser=ye,R.parser=ye.parse,R.Renderer=at,R.TextRenderer=Lt,R.Lexer=Ee,R.lexer=Ee.lex,R.Tokenizer=rt,R.Slugger=Ot,R.parse=R;var qt=R;return qt})})(kt);var Be=kt.exports,hn=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var l=document.activeElement,i=[],D=0;D<n.rangeCount;D++)i.push(n.getRangeAt(D));switch(l.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":l.blur();break;default:l=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||i.forEach(function(b){n.addRange(b)}),l&&l.focus()}},gn=hn,Et={"text/plain":"Text","text/html":"Url",default:"Text"},Dn="Copy to clipboard: #{key}, Enter";function vn(n){var l=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,l)}function mn(n,l){var i,D,b,C,d,p,f=!1;l||(l={}),i=l.debug||!1;try{b=gn(),C=document.createRange(),d=document.getSelection(),p=document.createElement("span"),p.textContent=n,p.style.all="unset",p.style.position="fixed",p.style.top=0,p.style.clip="rect(0, 0, 0, 0)",p.style.whiteSpace="pre",p.style.webkitUserSelect="text",p.style.MozUserSelect="text",p.style.msUserSelect="text",p.style.userSelect="text",p.addEventListener("copy",function(y){if(y.stopPropagation(),l.format)if(y.preventDefault(),typeof y.clipboardData=="undefined"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var x=Et[l.format]||Et.default;window.clipboardData.setData(x,n)}else y.clipboardData.clearData(),y.clipboardData.setData(l.format,n);l.onCopy&&(y.preventDefault(),l.onCopy(y.clipboardData))}),document.body.appendChild(p),C.selectNodeContents(p),d.addRange(C);var F=document.execCommand("copy");if(!F)throw new Error("copy command was unsuccessful");f=!0}catch(y){i&&console.error("unable to copy using execCommand: ",y),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(l.format||"text",n),l.onCopy&&l.onCopy(window.clipboardData),f=!0}catch(x){i&&console.error("unable to copy using clipboardData: ",x),i&&console.error("falling back to prompt"),D=vn("message"in l?l.message:Dn),window.prompt(D,n)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(C):d.removeAllRanges()),p&&document.body.removeChild(p),b()}return f}var Se=mn;const _e=n=>{const l=n.value,i=l.substring(0,n.selectionStart),D=l.substring(n.selectionEnd,l.length),b=i.lastIndexOf(`
`),C=i.substring(0,b+1),d=D.indexOf(`
`),p=D.substring(d===-1?D.length:d,D.length),f=i.substring(b+1,i.length),F=D.substring(0,d);return{prefixStr:i,subfixStr:D,prefixStrEndRow:C,subfixStrEndRow:p,prefixSupply:f,subfixSupply:F}},bn=(n,l="",i,D)=>{var b,C;let d="",p=0,f=0,F=!1,y,x;if(/^h[1-6]{1}$/.test(n)){const A=n.replace(/^h(\d)/,(B,w)=>new Array(Number(w)).fill("#",0,w).join(""));d=`${A} ${l}`,p=A.length+1}else{if(n==="prettier")return window.prettier.format(i.value,{parser:"markdown",plugins:window.prettierPlugins});switch(n){case"bold":{d=`**${l}**`,p=2,f=-2;break}case"underline":{d=`<u>${l}</u>`,p=3,f=-4;break}case"italic":{d=`*${l}*`,p=1,f=-1;break}case"strikeThrough":{d=`~${l}~`,p=1,f=-1;break}case"sub":{d=`<sub>${l}</sub>`,p=5,f=-6;break}case"sup":{d=`<sup>${l}</sup>`,p=5,f=-6;break}case"codeRow":{d="`"+l+"`",p=1,f=-1;break}case"quote":{d=`> ${l}`,p=2;break}case"orderedList":{d=`1. ${l}`,p=3;break}case"unorderedList":{d=`- ${l}`,p=2;break}case"code":{d="```language\n"+l+"\n```\n",p=3,f=11-d.length,F=!0;break}case"table":{d=`| \u8868\u5934 | \u8868\u5934 |
| - | - |
| \u5185\u5BB9 | \u5185\u5BB9 |
`,p=2,f=4-d.length,F=!0;break}case"link":{const{desc:A,url:B}=D;d=`[${A}](${B})`;break}case"image":{const{desc:A,url:B}=D;d=`![${A}](${B})
`;break}case"tab":{l=((b=window.getSelection())==null?void 0:b.toString())||"";const{tabWidth:A=2}=D,B=new Array(A).fill(" ").join("");if(l==="")d=B;else if(/\n/.test(l)){const{prefixStr:w,subfixStr:I,prefixSupply:L,subfixSupply:H}=_e(i);d=`${L}${l}${H}`.split(`
`).map(Z=>`${B}${Z}`).join(`
`),y=w.substring(0,w.length-L.length),x=I.substring(H.length,I.length),F=!0,p=A,f=-L.length-H.length}else{const I=i.value.substring(0,i.selectionStart);/\n$/.test(I)||I===""?(d=`${B}${l}`,F=!0):d=B}break}case"shiftTab":{l=((C=window.getSelection())==null?void 0:C.toString())||"";const{tabWidth:A=2}=D,{prefixStr:B,prefixStrEndRow:w,subfixStrEndRow:I,prefixSupply:L,subfixSupply:H}=_e(i),W=new RegExp(`^\\s{${A}}`),M=(Z=!1,ie=!1)=>{const ee=`${L}${l}${H}`;if(W.test(ee)){const G=B.length-(ie?0:A),ue=Z?G+l.length-A:G;return oe(i,G,ue),`${w}${ee.replace(W,"")}${I}`}else if(/^\s/.test(ee)){const G=ee.replace(/^\s/,""),ue=ee.length-G.length,te=i.selectionStart-(ie?0:ue),fe=Z?te+l.length-ue:te;return oe(i,te,fe),`${w}${G}${I}`}else d=l};if(l===""){const Z=M();if(Z)return Z}else if(/\n/.test(l)){const ie=`${L}${l}${H}`.split(`
`);let[ee,G]=[0,0];const ue=ie.map((te,fe)=>{if(W.test(te))return fe===0&&(ee=A),G+=A,te.replace(W,"");if(/^\s/.test(te)){const ge=te.replace(/^\s/,"");return G+=te.length-ge.length,ge}return te}).join(`
`);return oe(i,i.selectionStart-ee,i.selectionEnd-G),`${w}${ue}${I}`}else{const Z=M(!0,!0);if(Z)return Z}break}case"ctrlC":{const{prefixSupply:A,subfixSupply:B}=_e(i);return Se(l===""?`${A}${B}`:l),i.value}case"ctrlX":{const{prefixStrEndRow:A,subfixStrEndRow:B,prefixStr:w,subfixStr:I,prefixSupply:L,subfixSupply:H}=_e(i);return l===""?(Se(`${L}${H}`),oe(i,A.length),`${A}${B.replace(/^\n/,"")}`):(Se(l),oe(i,w.length),`${w}${I}`)}case"ctrlD":{const{prefixStrEndRow:A,subfixStrEndRow:B}=_e(i);return oe(i,A.length),`${A}${B.replace(/^\n/,"")}`}}}return Xe(i,d,{deviationStart:p,deviationEnd:f,select:F,prefixVal:y,subfixVal:x})},Cn=(n,l)=>{var i,D;const b=K("previewOnly"),C=K("historyLength"),d=K("editorId");if(b)return;let p=-1;const f={list:[{content:n.value,startPos:((i=l.value)==null?void 0:i.selectionStart)||0,endPos:((D=l.value)==null?void 0:D.selectionEnd)||0}],userUpdated:!0,curr:0};re(()=>n.value,F=>{var y,x;clearTimeout(p);const A=((y=l.value)==null?void 0:y.selectionStart)||0,B=((x=l.value)==null?void 0:x.selectionEnd)||0;p=setTimeout(()=>{if(f.userUpdated){f.curr<f.list.length-1&&(f.list=f.list.slice(0,f.curr+1)),f.list.length>C&&f.list.shift();const w=f.list.pop();w.startPos=A,w.endPos=B,Array.prototype.push.call(f.list,w,{content:F,startPos:A,endPos:B}),f.curr=f.list.length-1}else f.userUpdated=!0},10)}),se(()=>{T.on(d,{name:"ctrlZ",callback(){f.userUpdated=!1,f.curr=f.curr-1<0?0:f.curr-1;const F=f.list[f.curr];n.onChange(F.content),oe(l.value,F.startPos,F.endPos)}}),T.on(d,{name:"ctrlShiftZ",callback(){f.userUpdated=!1,f.curr=f.curr+1===f.list.length?f.curr:f.curr+1;const F=f.list[f.curr];n.onChange(F.content),oe(l.value,F.startPos,F.endPos)}})})},Fn=n=>{const l=K("showCodeRowNumber"),i=K("editorId"),D=Q(!1);let b=[];const C=new Be.Renderer;C.heading=(...f)=>{const[F,y]=f;return b.push({text:F,level:y}),n.markedHeading(...f)},C.image=(f,F,y)=>`<figure><img src="${f}" alt="${y}"><figcaption>${y}</figcaption></figure>`,Be.setOptions({renderer:C,breaks:!0}),n.hljs&&Be.setOptions({highlight:f=>{const F=n.hljs.highlightAuto(f).value;return l?bt(F):`<span class="code-block">${F}</span>`}});const d=ce(()=>{b=[];const f=Be(n.value);return D.value,f}),p=()=>{Be.setOptions({highlight:f=>{const F=window.hljs.highlightAuto(f).value;return l?bt(F):`<span class="code-block">${F}</span>`}}),D.value=!0};return re(()=>d.value,f=>{n.onHtmlChanged(f),n.onGetCatalog(b),T.emit(i,"catalogChanged",b)}),{html:d,highlightLoad:p}},kn=(n,l,i,D,b)=>{const C=K("previewOnly"),d=K("usedLanguageText"),p=K("editorId");let f=()=>{};const F=()=>{document.querySelectorAll(`#${p} .${m}-preview pre`).forEach(x=>{var A;const B=document.createElement("span");B.setAttribute("class","copy-button"),B.innerText=((A=d.value.copyCode)==null?void 0:A.text)||"\u590D\u5236\u4EE3\u7801",B.addEventListener("click",()=>{var w;Se(x.querySelector("code").innerText),B.innerText=((w=d.value.copyCode)==null?void 0:w.tips)||"\u5DF2\u590D\u5236\uFF01",setTimeout(()=>{var I;B.innerText=((I=d.value.copyCode)==null?void 0:I.text)||"\u590D\u5236\u4EE3\u7801"},1500)}),x.appendChild(B)})},y=()=>{xe(()=>{n.setting.preview&&!C&&(f=mt(i.value,D.value||b.value)),F()})};re(()=>l.value,y),re(()=>n.setting.preview,x=>{x&&!C?xe(()=>{f=mt(i.value,D.value||b.value)}):f()}),se(y)},En=(n,l)=>{const i=K("previewOnly"),D=K("tabWidth"),b=K("editorId"),C=Q("");return se(()=>{var d,p;i||((d=l.value)==null||d.addEventListener("select",()=>{var f;C.value=((f=window.getSelection())==null?void 0:f.toString())||""}),(p=l.value)==null||p.addEventListener("keypress",f=>{var F,y,x;if(f.key==="Enter"){const A=(F=l.value)==null?void 0:F.selectionStart,B=(y=l.value)==null?void 0:y.value.substring(0,A),w=(x=l.value)==null?void 0:x.value.substring(A),I=B==null?void 0:B.lastIndexOf(`
`),L=B==null?void 0:B.substring(I+1,A);if(/^\d+\.\s|^-\s/.test(L))if(f.cancelBubble=!0,f.preventDefault(),f.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(L)){const H=B==null?void 0:B.replace(new RegExp(L+"$"),"");n.onChange(H+w),oe(l.value,H==null?void 0:H.length)}else if(/^-\s+.+/.test(L))n.onChange(Xe(l.value,`
- `,{}));else{const H=L==null?void 0:L.match(/\d+(?=\.)/),W=H&&Number(H[0])+1||1;n.onChange(Xe(l.value,`
${W}. `,{}))}}}),T.on(b,{name:"replace",callback(f,F={}){n.onChange(bn(f,C.value,l.value,Je($e({},F),{tabWidth:D})))}}))}),T.on(b,{name:"selectTextChange",callback(d){C.value=d}}),{selectedText:C}};var yn=ae({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})},onHtmlChanged:{type:Function,default:()=>()=>{}},onGetCatalog:{type:Function,default:()=>()=>{}},markedHeading:{type:Function,default:()=>(n,l)=>`<h${l} id="${n}"><a href="#${n}">${n}</a></h${l}>`}},setup(n){const l=K("highlight"),i=K("previewOnly"),D=K("showCodeRowNumber"),b=K("previewTheme"),C=K("editorId"),d=Q(),p=Q(),f=Q(),{html:F,highlightLoad:y}=Fn(n);kn(n,F,d,p,f);const{selectedText:x}=En(n,d);return Cn(n,d),()=>s(We,null,[s("div",{class:[`${m}-content`]},[!i&&s("div",{class:[`${m}-input-wrapper`]},[s("textarea",{id:`${C}-textarea`,ref:d,value:n.value,onInput:A=>{x.value="",n.onChange(A.target.value)},class:[n.setting.preview||n.setting.htmlPreview?"":"textarea-only"]},null)]),n.setting.preview&&s("div",{ref:p,id:`${m}-preview`,class:[`${m}-preview`,`${b==null?void 0:b.value}-theme`,D&&`${m}-scrn`],innerHTML:F.value},null),n.setting.htmlPreview&&s(We,null,[s("div",{ref:f,class:`${m}-html`},[F.value])])]),n.hljs===null&&s(we,{to:"head"},{default:()=>[s("link",{rel:"stylesheet",href:l.value.css},null),s("script",{src:l.value.js,onLoad:y},null)]})])}});const yt=ae({props:{tocItem:{type:Object,default:()=>({})},markedHeadingId:{type:Function,default:()=>{}}},setup(n){return()=>s("div",{class:`${m}-catalog-link`,onClick:l=>{l.stopPropagation();const i=n.markedHeadingId(n.tocItem.text,n.tocItem.level),D=document.getElementById(i),b=document.getElementById(`${m}-preview`);if(D){const C=D.offsetTop;b==null||b.scrollTo({top:C,behavior:"smooth"})}}},[s("span",null,[n.tocItem.text]),n.tocItem.children&&n.tocItem.children.map(l=>s(yt,{markedHeadingId:n.markedHeadingId,key:l.text,tocItem:l},null))])}}),An=ae({props:{markedHeadingId:{type:Function,default:()=>{}}},setup(n){const l=K("editorId"),i=he({list:[],show:!1}),D=ce(()=>{const b=[];return i.list.forEach(({text:C,level:d})=>{const p={level:d,text:C};if(b.length===0)b.push(p);else{let f=b[b.length-1];if(p.level>f.level)for(let F=f.level+1;F<=6;F++){const{children:y}=f;if(!y){f.children=[p];break}if(f=y[y.length-1],p.level<=f.level){y.push(p);break}}else b.push(p)}}),b});return se(()=>{T.on(l,{name:"catalogChanged",callback:b=>{i.list=b}}),T.on(l,{name:"catalogShow",callback:()=>{i.show=!i.show}})}),()=>i.show?s("div",{class:`${m}-catalog`},[D.value.map(b=>s(yt,{markedHeadingId:n.markedHeadingId,tocItem:b,key:b.text},null))]):""}}),m="md",At=n=>n,wn={modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:Ze.js},highlightCss:{type:String,default:""},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Object,default:()=>({})},toolbars:{type:Array,default:Qt},toolbarsExclude:{type:Array,default:[]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:ht.main},prettierMDCDN:{type:String,default:ht.markdown},onHtmlChanged:{type:Function},Cropper:{type:Function,default:null},cropperCss:{type:String,default:gt.css},cropperJs:{type:String,default:gt.js},iconfontJs:{type:String,default:Xt},onGetCatalog:{type:Function},editorId:{type:String,default:"md-editor-v3"},tabWidth:{type:Number,default:2},showCodeRowNumber:{type:Boolean,default:!1},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:Yt},previewTheme:{type:String,default:"default"},markedHeading:{type:Function,default:(n,l)=>{const i=At(n);return`<h${l} id="${i}"><a href="#${i}">${n}</a></h${l}>`}},style:{type:Object,default:()=>({})},markedHeadingId:{type:Function,default:At}};var Ye=ae({name:"MdEditorV3",props:wn,setup(n,l){const{hljs:i,previewOnly:D,iconfontJs:b,prettier:C,prettierCDN:d,prettierMDCDN:p,Cropper:f,cropperCss:F,cropperJs:y,editorId:x,screenfull:A,screenfullJs:B}=n;tn(n,l),nn(n);const w=he({pageFullScreen:n.pageFullScreen,fullscreen:!1,preview:n.preview,htmlPreview:n.preview?!1:n.htmlPreview}),I=(M,Z)=>{w[Z]=M,Z==="preview"&&w.preview?w.htmlPreview=!1:Z==="htmlPreview"&&w.htmlPreview&&(w.preview=!1)};let L="";const H=()=>{w.pageFullScreen||w.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=L};re(()=>[w.pageFullScreen,w.fullscreen],H),se(()=>{D||T.on(x,{name:"uploadImage",callback(M,Z){const ie=ee=>{ee.forEach(G=>{setTimeout(()=>{T.emit(x,"replace","image",{desc:"",url:G})},0)}),Z&&Z()};n.onUploadImg?n.onUploadImg(M,ie):l.emit("onUploadImg",M,ie)}}),L=document.body.style.overflow,H()}),Ke(()=>{T.clear(x)});const W=ce(()=>!n.toolbarsExclude.includes("catalog")&&n.toolbars.includes("catalog"));return()=>s("div",{id:x,class:[m,n.editorClass,n.theme==="dark"&&`${m}-dark`,w.fullscreen||w.pageFullScreen?`${m}-fullscreen`:"",D&&`${m}-previewOnly`],style:n.style},[!D&&s(fn,{prettier:C,screenfull:A,screenfullJs:B,toolbars:n.toolbars,toolbarsExclude:n.toolbarsExclude,setting:w,updateSetting:I},null),s(yn,{hljs:i,value:n.modelValue,onChange:M=>{n.onChange?n.onChange(M):l.emit("update:modelValue",M)},setting:w,onHtmlChanged:M=>{n.onHtmlChanged?n.onHtmlChanged(M):l.emit("onHtmlChanged",M)},onGetCatalog:M=>{n.onGetCatalog?n.onGetCatalog(M):l.emit("onGetCatalog",M)},markedHeading:n.markedHeading},null),W.value&&s(An,{markedHeadingId:n.markedHeadingId},null),!D&&s(we,{to:"head"},{default:()=>[s("script",{src:b},null)]}),C&&!D&&s(we,{to:"head"},{default:()=>[s("script",{src:d},null),s("script",{src:p},null)]}),!D&&f===null&&s(we,{to:"head"},{default:()=>[s("link",{href:F,rel:"stylesheet"},null),s("script",{src:y},null)]})])}});Ye.install=n=>(n.component(Ye.name,Ye),n);export{Ye as E};
