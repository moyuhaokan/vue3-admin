import{a as F}from"./table.api.cf53efe8.js";import{e as D,aj as m,az as k,f as e,aq as a,aH as I,a$ as o,aI as S,aJ as d,aC as g,b9 as n,b1 as O,aF as i,a6 as B,F as R,_ as T,ba as z,aK as r,ae as N,bb as j,ap as K,ar as C}from"./vendor.9087327e.js";import"./index.621cc560.js";function L(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!N(l)}var _=D({name:"ViewTableQuery",setup(){const l=m({selectCount:0,invokeCount:0,expand:!1,pageNo:0,pageSize:10,loading:!1,selectedRowKeys:new Array}),c=m({dataSourceList:[],total:0}),b=[{title:"\u89C4\u5219\u7F16\u53F7",id:0,dataIndex:"code",width:200},{title:"\u63CF\u8FF0",id:2,dataIndex:"desc",width:800},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",id:3,dataIndex:"invokeCount",width:160,orderable:!0,sort:(u,t)=>u.invokeCount-t.invokeCount},{title:"\u72B6\u6001",id:4,dataIndex:"status",width:160,custom:!0,customRender:()=>e(r.Column,{title:"\u64CD\u4F5C",customRender:w},null)},{title:"\u66F4\u65B0\u65F6\u95F4",id:5,dataIndex:"updateTime",width:200,orderable:!0,sort:(u,t)=>new Date(u.updateTime).getTime()-new Date(t.updateTime).getTime()},{title:"\u64CD\u4F5C",id:6,custom:!0,customRender:()=>e(r.Column,{title:"\u64CD\u4F5C",customRender:A},null)}],v=[{label:"\u505C\u6B62",value:0,color:"#d9d9d9"},{label:"\u8FD0\u884C\u4E2D",value:1,color:"#108ee9"},{label:"\u5DF2\u4E0A\u7EBF",value:2,color:"green"},{label:"\u5F02\u5E38",value:3,color:"red"}],p=()=>{l.loading=!0,F(l.pageNo,l.pageSize).then(({records:u,total:t})=>{c.dataSourceList=u,c.total=t}).finally(()=>{l.loading=!1})};k(()=>{p()});const y=()=>({type:"checkbox",selectedRowKeys:l.selectedRowKeys,selections:!1,onChange:(u,t)=>{l.selectedRowKeys=u,l.selectCount=l.selectedRowKeys.length;let s=0;t.forEach(h=>{s+=h.invokeCount}),l.invokeCount=s/1e4}}),x=()=>{l.pageNo=1,p()},f=(...[u,t])=>{l.pageNo=u,l.pageSize=t,p()},A=({record:u})=>{const t=()=>{C.info("\u914D\u7F6E"+u.id)},s=()=>{C.info("\u8BA2\u9605\u8B66\u62A5"+u.id)};return e("span",null,[e("a",{onClick:t},[a("\u914D\u7F6E")]),e(j,{type:"vertical"},null),e("a",{onClick:s},[a("\u8BA2\u9605\u8B66\u62A5")])])},w=({record:u})=>{const t=v.find(s=>s.value===u.status);return e(K,{text:t==null?void 0:t.label,color:t==null?void 0:t.color},null)},E=()=>e("span",null,[a("\u5DF2\u9009\u62E9"),e(i,{type:"link"},{default:()=>[e("b",null,[l.selectCount])]}),a("\u9879 \xA0\xA0\xA0 \u670D\u52A1\u8C03\u7528\u603B\u8BA1 "),e("b",null,[l.invokeCount]),a(" \u4E07 \xA0\xA0\xA0\xA0\xA0\xA0"),l.selectCount>0?e(i,{type:"link"},{default:()=>[a("\u6E05\u7A7A")]}):""]);return()=>{let u;return e("section",null,[e("section",{class:"query-title"},[e("div",{class:"title-wrap"},[e("h1",null,[a("\u67E5\u8BE2\u8868\u5355")])])]),e("section",{class:"query-content"},[e(I,null,{default:()=>[e("section",null,[e(o,null,{default:()=>[e(S,{gutter:24},{default:()=>[e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u89C4\u5219\u7F16\u53F7"},{default:()=>[e(g,{placeholder:"\u8BF7\u8F93\u5165"},null)]})]}),e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u4F7F\u7528\u72B6\u6001"},{default:()=>[e(n,null,{default:()=>[e(n.Option,{value:0},{default:()=>[a("\u505C\u6B62")]}),e(n.Option,{value:1},{default:()=>[a("\u8FD0\u884C\u4E2D")]}),e(n.Option,{value:2},{default:()=>[a("\u5DF2\u4E0A\u7EBF")]}),e(n.Option,{value:3},{default:()=>[a("\u5F02\u5E38")]})]})]})]}),l.expand?e("template",null,[e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u8C03\u7528\u6B21\u6570"},{default:()=>[e(g,{placeholder:"\u8BF7\u8F93\u5165"},null)]})]}),e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u66F4\u65B0\u65E5\u671F"},{default:()=>[e(O,null,null)]})]}),e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u4F7F\u7528\u72B6\u6001"},{default:()=>[e(n,null,{default:()=>[e(n.Option,{value:0},{default:()=>[a("\u505C\u6B62")]}),e(n.Option,{value:1},{default:()=>[a("\u8FD0\u884C\u4E2D")]}),e(n.Option,{value:2},{default:()=>[a("\u5DF2\u4E0A\u7EBF")]}),e(n.Option,{value:3},{default:()=>[a("\u5F02\u5E38")]})]})]})]}),e(d,{md:8,sm:24},{default:()=>[e(o.Item,{label:"\u4F7F\u7528\u72B6\u6001"},{default:()=>[e(n,null,{default:()=>[e(n.Option,{value:0},{default:()=>[a("\u505C\u6B62")]}),e(n.Option,{value:1},{default:()=>[a("\u8FD0\u884C\u4E2D")]}),e(n.Option,{value:2},{default:()=>[a("\u5DF2\u4E0A\u7EBF")]}),e(n.Option,{value:3},{default:()=>[a("\u5F02\u5E38")]})]})]})]})]):"",e(d,{span:l.expand?24:8,class:"btn-groups"},{default:()=>[e(o.Item,null,{default:()=>[e(i,{type:"primary",onClick:x},{default:()=>[a("\u67E5\u8BE2")]}),e(i,{type:"default",class:"btn-mg"},{default:()=>[a("\u91CD\u7F6E")]}),l.expand?e(i,{type:"link"},{default:()=>[a("\u6536\u8D77"),e(B,null,null)]}):e(i,{type:"link"},{default:()=>[a("\u5C55\u5F00"),e(R,null,null)]})]})]})]})]})]),e("section",null,[e(i,{type:"primary",icon:e(T,null,null)},{default:()=>[a("\u65B0\u5EFA")]}),e("div",{class:"my-md"},[e(z,{message:E(),type:"info",key:"id"},null)]),e(r,{loading:l.loading,key:"id",rowKey:"id",rowSelection:y(),onChange:(...t)=>{console.log(t)},pagination:{current:l.pageNo,pageSize:l.pageSize,total:c.total,showSizeChanger:!0,showQuickJumper:!0,onChange:f,onShowSizeChange:f},dataSource:c.dataSourceList},L(u=b.map(t=>t.orderable?e(r.Column,{title:t.title,dataIndex:t.dataIndex,sorter:t.sort},null):t.custom?t.customRender():e(r.Column,{title:t.title,dataIndex:t.dataIndex},null)))?u:{default:()=>[u]})])]})])])}}});export{_ as default};
